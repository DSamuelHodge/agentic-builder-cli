# {{ pascal_name }} Workflow
# Generated by restack-gen on {{ now().strftime('%Y-%m-%d') }}

from datetime import timedelta
from pydantic import BaseModel
from restack_ai.workflow import workflow, import_functions, log

with import_functions():
    from src.functions.llm_chat import llm_chat, LlmChatInput

class {{ pascal_name }}WorkflowInput(BaseModel):
    subject: str
    body: str

@workflow.defn()
class {{ pascal_name }}Workflow:
    """{{ pascal_name }} workflow for {{ app_name }}."""

    @workflow.run
    async def run(self, workflow_input: {{ pascal_name }}WorkflowInput):
        """Run the {{ snake_name }} workflow."""
        log.info("{{ pascal_name }}Workflow starting", input=workflow_input)

        # Workflow logic here - can call functions and agents
        result = {
            "message": "Hello from {{ pascal_name }}Workflow",
            "input": workflow_input,
            "workflow": "{{ pascal_name }}"
        }

        log.info("{{ pascal_name }}Workflow completed", result=result)
        return result


if __name__ == "__main__":
    # For local development
    import asyncio

    async def main():
        workflow_info()
        workflow_instance = {{ pascal_name }}Workflow()
        result = await workflow_instance.run({"test": True})
        print(f"Workflow result: {result}")

    asyncio.run(main())